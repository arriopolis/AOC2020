print([(len(x) == 7 and 'cid' not in x or len(x) == 8) and 1920 <= int(x['byr']) <= 2002 and 2010 <= int(x['iyr']) <= 2020 and 2020 <= int(x['eyr']) <= 2030 and ((x['hgt'][-2:] == 'cm' and 150 <= int(x['hgt'][:-2]) <= 193) or (x['hgt'][-2:] == 'in' and 59 <= int(x['hgt'][:-2]) <= 76)) and x['hcl'][0] == '#' and all(c in '0123456789abcdef' for c in x['hcl'][1:]) and x['ecl'] in ['amb', 'blu', 'brn', 'gry', 'grn', 'hzl', 'oth'] and len(x['pid']) == 9 and all(c in '0123456789' for c in x['pid']) for x in map(lambda l : {a:b for a,b in map(lambda x : x.split(':'), l.split())}, open('input.txt').read().split('\n\n'))].count(True))
